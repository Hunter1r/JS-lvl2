{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./module_vue_basket.js","webpack:///./module_vue_main.js","webpack:///./module_vue_search.js","webpack:///./script.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB,cAAc,mBAAmB;AACjC,gBAAgB,YAAY;AAC5B,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA,oBAAoB;AACpB;AACA,CAAC;;;AAGc;AACf;AACA,CAAC,E;;;;;;;;;;;;ACrDD;AAAA;AAAA;AAAA,CAAwD;AACxD,CAAwD;;AAExD,aAAa,6DAAiB;AAC9B,aAAa,6DAAiB;;;AAG9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,kCAAkC,UAAU;AAC5C;;AAEA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,CAAC;;;AAGD;AACA;AACA;;AAEe;AACf;AACA,CAAC,E;;;;;;;;;;;;AC5FD;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;;AAEc;AACf;AACA,CAAC,E;;;;;;;;;;;;AC1BD;AAAA;AAAA;AAAA;AAA0C;AACa;AACA;;AAEvD,YAAY,2DAAM;AAClB,YAAY,6DAAiB;AAC7B,aAAa,6DAAiB","file":"./build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./script.js\");\n","Vue.component('basket', {\r\n    props: ['basket'],\r\n    template:\r\n        `<div class=\"basket-items\">\r\n    <div class=\"basket-item\" v-for=\"(item, index) in basket\">\r\n    <button v-on:click=\"remove(item)\">Убрать</button>\r\n        <span>{{++index}}</span>\r\n        <h4>{{item.product_name}}</h4>\r\n        <span>{{item.count}}</span>\r\n        <span>{{item.totalPrice}}</span>\r\n    </div>\r\n        <div class=\"basket-total\">\r\n            <h4>Итого:</h4>\r\n            <span>{{getSumBasket()}}</span>\r\n        </div>\r\n    </div>`\r\n    ,\r\n    data(basket) {\r\n        return {\r\n            basketSum: basket.basket\r\n        }\r\n    },\r\n    methods: {\r\n        getSumBasket() {\r\n            return this.basketSum.reduce((accum, curval) => {\r\n                return accum = accum + curval.totalPrice || curval.totalPrice;\r\n            }, 0)\r\n        },\r\n        remove(item) {\r\n            let el = this.basket.find((elem) => elem.id_product == item.id_product);\r\n            if (el != undefined && el.count > 1) {\r\n                el.count--;\r\n                el.totalPrice -= el.price;\r\n            } else if (el.count == 1) {\r\n                let indx = this.basket.indexOf(el);\r\n                if (indx > -1) {\r\n                    this.basket.splice(indx, 1);\r\n                }\r\n            }\r\n\r\n            this.$parent.makePOSTRequest(`/removeFromCart`, item, (respText) => {\r\n                console.log(respText);\r\n            })\r\n        }\r\n    },\r\n    computed: {\r\n        counting() { return this.count = this.count + 1 }\r\n    }\r\n})\r\n\r\n\r\nexport default {\r\n    vue: Vue\r\n};"," import module_vue_search from './module_vue_search.js';\r\n import module_vue_basket from './module_vue_basket.js';\r\n\r\n const srh = module_vue_search.vue\r\n const bsk = module_vue_basket.vue\r\n\r\n\r\nconst app = new Vue({\r\n    el: '#app',\r\n    data: {\r\n        goods: [],\r\n        filteredGoods: [],\r\n        basket: [],\r\n        searchline: '',\r\n        isVisibleCart: false,\r\n    },\r\n     component: {\r\n         search: srh,\r\n         basket: bsk\r\n     },\r\n    methods: {\r\n        makeGETRequest(url) {\r\n            const promise = new Promise((resolve, reject) => {\r\n                var xhr;\r\n                if (window.XMLHttpRequest) {\r\n                    xhr = new XMLHttpRequest();\r\n                } else if (window.ActiveXObject) {\r\n                    xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n                }\r\n                xhr.onreadystatechange = function () {\r\n                    if (xhr.readyState === 4) {\r\n                        resolve(xhr.responseText)\r\n                    }\r\n                }\r\n                xhr.open('GET', url, true);\r\n                xhr.send();\r\n            })\r\n            return promise;\r\n        },\r\n        makePOSTRequest(url, data, callback) {\r\n            let xhr;\r\n            if (window.XMLHttpRequest) {\r\n                xhr = new XMLHttpRequest();\r\n            } else if (window.ActiveXObject) {\r\n                xhr = new ActiveXObject('Microsoft.XMLHTTP');\r\n            }\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4) {\r\n                    \r\n                    callback(xhr.responseText);\r\n                }\r\n            }\r\n            xhr.open('POST', url, true);\r\n            xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\r\n            xhr.send(JSON.stringify(data));\r\n        },\r\n        add(good) {\r\n            //добавление товара в корзину\r\n            let el = this.basket.find((elem) => elem.id_product == good.id_product);\r\n            if (el != undefined) {\r\n                el.count++;\r\n                el.totalPrice += el.price;\r\n            } else {\r\n                good.count = 1;\r\n                good.totalPrice = good.price;\r\n                this.basket.push({ ...good });\r\n            }\r\n\r\n            this.makePOSTRequest(`/addToCart`, good, (respText) => {\r\n                console.log('resp text'+respText);\r\n            })\r\n        }\r\n    },\r\n    mounted() {\r\n        //debugger;\r\n        this.makeGETRequest(`/catalogData`).then((goods) => {\r\n            this.goods = JSON.parse(goods);\r\n            this.filteredGoods = JSON.parse(goods);\r\n        })\r\n        this.makeGETRequest(`/cartItems`).then((goods) => {\r\n            this.basket = JSON.parse(goods);\r\n        })\r\n    }\r\n})\r\n\r\n\r\n// module.exports = {\r\n//     add: app.add\r\n// }\r\n\r\nexport default {\r\n    app: app\r\n};","Vue.component('search', {\r\n    template:\r\n        `<div class=\"search-line\"> \r\n        <input type=\"text\" class=\"goods-search\" v-model=\"srch\" v-on:keyup=\"clickHandler(srch)\">\r\n    <button class=\"search-button\" type=\"button\" v-on:click=\"clickHandler(srch)\">Искать</button>\r\n    </div>`,\r\n    methods: {\r\n        clickHandler(srch) {\r\n            this.filterGoods(srch);\r\n        },\r\n        filterGoods(value) {\r\n            const regexp = new RegExp(value, 'i');\r\n            this.$parent.filteredGoods = this.$parent.goods.filter(good => {\r\n                return regexp.test(good.product_name);\r\n            })\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            srch: \"\"\r\n        }\r\n    }\r\n})\r\n\r\nexport default {\r\n    vue: Vue\r\n};","import module from './module_vue_main.js';\r\nimport module_vue_search from './module_vue_search.js';\r\nimport module_vue_basket from './module_vue_basket.js';\r\n\r\nconst app = module.app\r\nconst Vue = module_vue_search.vue\r\nconst Vue2 = module_vue_basket.vue\r\n\r\n\r\n"],"sourceRoot":""}